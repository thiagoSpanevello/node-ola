<html>

<head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384"></script>
      
      <style>
      .baiano{
          height: 15px!important;
          background-color: black!important;
          margin-top: 0.5%;
      }
      .padding{
          padding-top: 2%;
          padding-left: 5%;
          padding-bottom: 5%;
      }
      
      </style>


    <script>

    function carregar(){
        var tab = document.getElementById('tabela');
        let url = 'http://localhost/enviar';
        fetch(url)
        .then(res => res.json())
        .then((out)=>{
            console.log('json : ', out);
            out.forEach(element => {
                let ano = element.ano;
                let valor = element.media;
                console.log(ano);
                console.log(valor);
                var tamanho = valor / 1000;
                var tam = tamanho.toString();
                // let regex = /(?<milhar>\d\d)(?<centenas>\d\d\d)(?<cents>\d\d\d)/;
                //     let string = valor.toString();
                //     console.log(string);
                    
                    
                //     let x = string.match(regex);
                //     var valor_formatado = (x.groups.milhar) + "." + (x.groups.centenas) + "," + (x.groups.cents);
                //     console.log(valor_formatado);
                    
                tab.innerHTML += `<div class="row"><div style= "padding-right: 2%; padding-bottom: 6%">${ano}</div><div class= "baiano" style= "width: ${tam}%!important"></div><div style= "margin-left: 2%">${valor}</div></div>`;
            })
            .catch(err => {throw err})
        })


    }
    

    </script>

</head>

<body onload="carregar()">
<h1 style="text-align: center">Dash Board</h1>


<div class="container col-10" id="tabela">
    <div class="row">
        <div>

        </div>
    </div>
</div>

</body>

</html>